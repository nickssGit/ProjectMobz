<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div >
        <div class="grid">
            <div class="count">
                <h1 id="fiftyfour">54</h1>
                <button onclick="startSession()">START SESSION</button>
            </div>
            <div class="tables">
                <table style="width: 100%;">
                    <tr>
                        <th >SessionId</th>
                        <th >Start Time</th>
                        <th >End Time</th>
                    </tr>
                    <tr style="text-align: center;">
                        <td id="sessioned"></td>
                        <td id="timestart"></td>
                        <td id="timeend"></td>
                    </tr>
                    
                </table>
            </div>
        </div>
       
    </div>
</body>
<script>
  
//   function startSession() {
//   const randomtime= Math.floor(Math.random() * (120 - 30 + 1)) + 30;
//   let sessionId = generateSessionId();
//   let startTime = new Date();
//   document.getElementById("fiftyfour").innerHTML=randomtime
// }
let sessionArray = [];
let bellSound = new Audio("film-countdown-88717.mp3");
function startSession() {
  let counter = Math.floor(Math.random() * (120 - 30 + 1)) + 30;
  let sessionId = generateSessionId();
  let startTime = new Date();
  
  let countdownDisplay = document.getElementById("fiftyfour");
  countdownDisplay.innerHTML = counter;
  
  let countdown = setInterval(() => {
    counter--;
    countdownDisplay.innerHTML = counter ;
    
    if (counter === 0) {
      clearInterval(countdown);
      let endTime = new Date();
      sessionArray.push({id: sessionId, start: startTime, end: endTime});
      let sessionides = document.getElementById("sessioned");
      let timestart=document.getElementById("timestart")
       let timesend=document.getElementById("timeend")           
      sessionides.innerHTML=sessionId;
      timestart.innerHTML= startTime.getFullYear()+ "/" +startTime.getMonth()+ "/"+startTime.getDate()+ "/" +startTime.toLocaleTimeString();
      timesend.innerHTML=endTime.getFullYear()+ "/" +endTime.getMonth()+ "/"+endTime.getDate()+ "/" +endTime.toLocaleTimeString();
    //   let sessionDisplay = document.getElementById("sessionDisplay");
    //   sessionDisplay.innerHTML = `Session ID: ${sessionId} <br> Start Time: ${startTime.toLocaleTimeString()} <br> End Time: ${endTime.toLocaleTimeString()} <br> <hr> ${sessionDisplay.innerHTML}`;
    bellSound.pause();
      bellSound.currentTime = 0;
    }else {
      if (bellSound.paused) {
        bellSound.loop = true;
        bellSound.play();
      }
    }
  }, 1000);
}

function generateSessionId() {
  let chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
  let sessionId = "";
  for (let i = 0; i < 10; i++) {
    sessionId += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return sessionId;
}

  </script>
</script>

</html>